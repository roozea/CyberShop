{"ast":null,"code":"import React,{useState}from'react';import{Table,Thead,Tbody,Tr,Th,Td,Box,Text,Image,Button,Select,useToast}from'@chakra-ui/react';// Mock de productos para comparar\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const mockProducts=[{id:1,name:\"Laptop Gaming Pro\",price:1299.99,image:\"https://source.unsplash.com/random/150x150?laptop\",specs:{processor:\"Intel i9\",ram:\"32GB\",storage:\"1TB SSD\",graphics:\"RTX 3080\"}},{id:2,name:\"Laptop Business\",price:999.99,image:\"https://source.unsplash.com/random/150x150?computer\",specs:{processor:\"Intel i7\",ram:\"16GB\",storage:\"512GB SSD\",graphics:\"Intel Iris\"}},{id:3,name:\"Laptop Basic\",price:599.99,image:\"https://source.unsplash.com/random/150x150?notebook\",specs:{processor:\"Intel i5\",ram:\"8GB\",storage:\"256GB SSD\",graphics:\"Intel UHD\"}}];export const ProductComparison=()=>{const[selectedProducts,setSelectedProducts]=useState([]);const[availableProducts]=useState(mockProducts);const toast=useToast();// Vulnerable: No validación de entrada\nconst addToComparison=productId=>{const product=availableProducts.find(p=>p.id===parseInt(productId));if(product){// Vulnerable: No límite en la cantidad de productos a comparar\nsetSelectedProducts([...selectedProducts,product]);// Vulnerable: Inyección directa de HTML\nconst comparisonDiv=document.getElementById('comparison-container');if(comparisonDiv){comparisonDiv.innerHTML+=`\n          <div class=\"product-card\">\n            <img src=\"${product.image}\" alt=\"${product.name}\" />\n            <h3>${product.name}</h3>\n            <p>$${product.price}</p>\n          </div>\n        `;}}};// Vulnerable: No validación de datos antes de guardar\nconst saveComparison=()=>{// Vulnerable: Almacenamiento de datos sensibles sin encriptación\nlocalStorage.setItem('savedComparisons',JSON.stringify(selectedProducts));toast({title:\"Comparación guardada\",status:\"success\",duration:3000,isClosable:true});};return/*#__PURE__*/_jsxs(Box,{p:4,children:[/*#__PURE__*/_jsx(Text,{fontSize:\"2xl\",mb:4,children:\"Comparaci\\xF3n de Productos\"}),/*#__PURE__*/_jsx(Box,{mb:4,children:/*#__PURE__*/_jsx(Select,{placeholder:\"Agregar producto para comparar\",onChange:e=>addToComparison(e.target.value),children:availableProducts.map(product=>/*#__PURE__*/_jsxs(\"option\",{value:product.id,children:[product.name,\" - $\",product.price]},product.id))})}),/*#__PURE__*/_jsx(\"div\",{id:\"comparison-container\"}),selectedProducts.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{variant:\"simple\",mt:4,children:[/*#__PURE__*/_jsx(Thead,{children:/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Th,{children:\"Caracter\\xEDsticas\"}),selectedProducts.map(product=>/*#__PURE__*/_jsx(Th,{children:product.name},product.id))]})}),/*#__PURE__*/_jsxs(Tbody,{children:[/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Td,{children:\"Imagen\"}),selectedProducts.map(product=>/*#__PURE__*/_jsx(Td,{children:/*#__PURE__*/_jsx(Image,{src:product.image,alt:product.name,boxSize:\"100px\",objectFit:\"cover\"})},product.id))]}),/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Td,{children:\"Precio\"}),selectedProducts.map(product=>/*#__PURE__*/_jsxs(Td,{children:[\"$\",product.price]},product.id))]}),/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Td,{children:\"Procesador\"}),selectedProducts.map(product=>/*#__PURE__*/_jsx(Td,{children:product.specs.processor},product.id))]}),/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Td,{children:\"RAM\"}),selectedProducts.map(product=>/*#__PURE__*/_jsx(Td,{children:product.specs.ram},product.id))]}),/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Td,{children:\"Almacenamiento\"}),selectedProducts.map(product=>/*#__PURE__*/_jsx(Td,{children:product.specs.storage},product.id))]}),/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Td,{children:\"Gr\\xE1ficos\"}),selectedProducts.map(product=>/*#__PURE__*/_jsx(Td,{children:product.specs.graphics},product.id))]})]})]}),/*#__PURE__*/_jsx(Button,{colorScheme:\"blue\",mt:4,onClick:saveComparison,children:\"Guardar Comparaci\\xF3n\"})]})]});};","map":{"version":3,"names":["React","useState","Table","Thead","Tbody","Tr","Th","Td","Box","Text","Image","Button","Select","useToast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","mockProducts","id","name","price","image","specs","processor","ram","storage","graphics","ProductComparison","selectedProducts","setSelectedProducts","availableProducts","toast","addToComparison","productId","product","find","p","parseInt","comparisonDiv","document","getElementById","innerHTML","saveComparison","localStorage","setItem","JSON","stringify","title","status","duration","isClosable","children","fontSize","mb","placeholder","onChange","e","target","value","map","length","variant","mt","src","alt","boxSize","objectFit","colorScheme","onClick"],"sources":["/home/ubuntu/cybershop-vuln-lab/CyberShop/frontend/src/components/ProductComparison.js"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Table,\n  Thead,\n  Tbody,\n  Tr,\n  Th,\n  Td,\n  Box,\n  Text,\n  Image,\n  Button,\n  Select,\n  useToast\n} from '@chakra-ui/react';\n\n// Mock de productos para comparar\nconst mockProducts = [\n  {\n    id: 1,\n    name: \"Laptop Gaming Pro\",\n    price: 1299.99,\n    image: \"https://source.unsplash.com/random/150x150?laptop\",\n    specs: {\n      processor: \"Intel i9\",\n      ram: \"32GB\",\n      storage: \"1TB SSD\",\n      graphics: \"RTX 3080\"\n    }\n  },\n  {\n    id: 2,\n    name: \"Laptop Business\",\n    price: 999.99,\n    image: \"https://source.unsplash.com/random/150x150?computer\",\n    specs: {\n      processor: \"Intel i7\",\n      ram: \"16GB\",\n      storage: \"512GB SSD\",\n      graphics: \"Intel Iris\"\n    }\n  },\n  {\n    id: 3,\n    name: \"Laptop Basic\",\n    price: 599.99,\n    image: \"https://source.unsplash.com/random/150x150?notebook\",\n    specs: {\n      processor: \"Intel i5\",\n      ram: \"8GB\",\n      storage: \"256GB SSD\",\n      graphics: \"Intel UHD\"\n    }\n  }\n];\n\nexport const ProductComparison = () => {\n  const [selectedProducts, setSelectedProducts] = useState([]);\n  const [availableProducts] = useState(mockProducts);\n  const toast = useToast();\n\n  // Vulnerable: No validación de entrada\n  const addToComparison = (productId) => {\n    const product = availableProducts.find(p => p.id === parseInt(productId));\n    if (product) {\n      // Vulnerable: No límite en la cantidad de productos a comparar\n      setSelectedProducts([...selectedProducts, product]);\n\n      // Vulnerable: Inyección directa de HTML\n      const comparisonDiv = document.getElementById('comparison-container');\n      if (comparisonDiv) {\n        comparisonDiv.innerHTML += `\n          <div class=\"product-card\">\n            <img src=\"${product.image}\" alt=\"${product.name}\" />\n            <h3>${product.name}</h3>\n            <p>$${product.price}</p>\n          </div>\n        `;\n      }\n    }\n  };\n\n  // Vulnerable: No validación de datos antes de guardar\n  const saveComparison = () => {\n    // Vulnerable: Almacenamiento de datos sensibles sin encriptación\n    localStorage.setItem('savedComparisons', JSON.stringify(selectedProducts));\n\n    toast({\n      title: \"Comparación guardada\",\n      status: \"success\",\n      duration: 3000,\n      isClosable: true,\n    });\n  };\n\n  return (\n    <Box p={4}>\n      <Text fontSize=\"2xl\" mb={4}>Comparación de Productos</Text>\n\n      <Box mb={4}>\n        <Select\n          placeholder=\"Agregar producto para comparar\"\n          onChange={(e) => addToComparison(e.target.value)}\n        >\n          {availableProducts.map((product) => (\n            <option key={product.id} value={product.id}>\n              {product.name} - ${product.price}\n            </option>\n          ))}\n        </Select>\n      </Box>\n\n      <div id=\"comparison-container\"></div>\n\n      {selectedProducts.length > 0 && (\n        <>\n          <Table variant=\"simple\" mt={4}>\n            <Thead>\n              <Tr>\n                <Th>Características</Th>\n                {selectedProducts.map((product) => (\n                  <Th key={product.id}>{product.name}</Th>\n                ))}\n              </Tr>\n            </Thead>\n            <Tbody>\n              <Tr>\n                <Td>Imagen</Td>\n                {selectedProducts.map((product) => (\n                  <Td key={product.id}>\n                    <Image\n                      src={product.image}\n                      alt={product.name}\n                      boxSize=\"100px\"\n                      objectFit=\"cover\"\n                    />\n                  </Td>\n                ))}\n              </Tr>\n              <Tr>\n                <Td>Precio</Td>\n                {selectedProducts.map((product) => (\n                  <Td key={product.id}>${product.price}</Td>\n                ))}\n              </Tr>\n              <Tr>\n                <Td>Procesador</Td>\n                {selectedProducts.map((product) => (\n                  <Td key={product.id}>{product.specs.processor}</Td>\n                ))}\n              </Tr>\n              <Tr>\n                <Td>RAM</Td>\n                {selectedProducts.map((product) => (\n                  <Td key={product.id}>{product.specs.ram}</Td>\n                ))}\n              </Tr>\n              <Tr>\n                <Td>Almacenamiento</Td>\n                {selectedProducts.map((product) => (\n                  <Td key={product.id}>{product.specs.storage}</Td>\n                ))}\n              </Tr>\n              <Tr>\n                <Td>Gráficos</Td>\n                {selectedProducts.map((product) => (\n                  <Td key={product.id}>{product.specs.graphics}</Td>\n                ))}\n              </Tr>\n            </Tbody>\n          </Table>\n\n          <Button\n            colorScheme=\"blue\"\n            mt={4}\n            onClick={saveComparison}\n          >\n            Guardar Comparación\n          </Button>\n        </>\n      )}\n    </Box>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}