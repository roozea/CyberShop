{"ast":null,"code":"import{Box,Image,Badge,Text,Button,Flex,Stack,Icon,Tooltip,useColorModeValue}from'@chakra-ui/react';import{Link}from'react-router-dom';import{FaStar,FaShoppingCart,FaHeart}from'react-icons/fa';import{BsBoxSeam}from'react-icons/bs';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const ProductCard=_ref=>{var _product$price;let{product,onAddToCart}=_ref;const bgColor=useColorModeValue('white','gray.800');const textColor=useColorModeValue('gray.700','white');// Vulnerable: Renderiza HTML sin sanitizar\nconst createMarkup=html=>({__html:html});return/*#__PURE__*/_jsxs(Box,{maxW:\"sm\",borderWidth:\"1px\",borderRadius:\"lg\",overflow:\"hidden\",bg:bgColor,_hover:{shadow:'lg',transform:'translateY(-2px)',transition:'all 0.2s'},children:[/*#__PURE__*/_jsxs(Box,{position:\"relative\",children:[/*#__PURE__*/_jsx(Image,{src:product.image||'https://via.placeholder.com/300',alt:product.name,height:\"200px\",width:\"100%\",objectFit:\"cover\"}),product.discount>0&&/*#__PURE__*/_jsxs(Badge,{position:\"absolute\",top:\"4\",right:\"4\",px:\"2\",py:\"1\",colorScheme:\"red\",borderRadius:\"md\",fontSize:\"sm\",fontWeight:\"bold\",children:[product.discount,\"% OFF\"]})]}),/*#__PURE__*/_jsxs(Box,{p:\"6\",children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"baseline\",mb:2,children:[/*#__PURE__*/_jsx(Badge,{borderRadius:\"full\",px:\"2\",colorScheme:\"blue\",children:product.category}),product.stock<=5&&/*#__PURE__*/_jsx(Badge,{borderRadius:\"full\",px:\"2\",colorScheme:\"orange\",ml:2,children:\"\\xA1\\xDAltimas unidades!\"})]}),/*#__PURE__*/_jsx(Flex,{justify:\"space-between\",align:\"baseline\",mb:2,children:/*#__PURE__*/_jsx(Text,{fontWeight:\"semibold\",fontSize:\"xl\",color:textColor,noOfLines:2,children:product.name})}),/*#__PURE__*/_jsx(Box,{fontSize:\"sm\",color:\"gray.600\",mb:2,dangerouslySetInnerHTML:createMarkup(product.description)}),/*#__PURE__*/_jsxs(Flex,{align:\"center\",mb:2,children:[/*#__PURE__*/_jsx(Flex,{align:\"center\",children:[...Array(5)].map((_,i)=>/*#__PURE__*/_jsx(Icon,{as:FaStar,color:i<Math.floor(product.rating||0)?\"yellow.400\":\"gray.300\",w:3,h:3},i))}),/*#__PURE__*/_jsxs(Text,{ml:1,fontSize:\"sm\",color:\"gray.600\",children:[\"(\",product.rating||0,\")\"]})]}),/*#__PURE__*/_jsxs(Flex,{justify:\"space-between\",align:\"center\",mb:4,children:[/*#__PURE__*/_jsxs(Stack,{spacing:0,children:[/*#__PURE__*/_jsxs(Text,{fontSize:\"2xl\",fontWeight:\"bold\",color:textColor,children:[\"$\",(_product$price=product.price)===null||_product$price===void 0?void 0:_product$price.toFixed(2)]}),product.discount>0&&/*#__PURE__*/_jsxs(Text,{fontSize:\"sm\",color:\"gray.500\",textDecoration:\"line-through\",children:[\"$\",((product.price||0)*(1+(product.discount||0)/100)).toFixed(2)]})]}),/*#__PURE__*/_jsx(Tooltip,{label:`${product.stock||0} unidades disponibles`,children:/*#__PURE__*/_jsxs(Flex,{align:\"center\",children:[/*#__PURE__*/_jsx(Icon,{as:BsBoxSeam,color:\"gray.500\"}),/*#__PURE__*/_jsx(Text,{ml:1,fontSize:\"sm\",color:\"gray.500\",children:product.stock||0})]})})]}),/*#__PURE__*/_jsxs(Flex,{justify:\"space-between\",align:\"center\",children:[/*#__PURE__*/_jsx(Link,{to:`/product/${product.id}`,style:{flex:1,marginRight:2},children:/*#__PURE__*/_jsx(Button,{variant:\"outline\",colorScheme:\"blue\",width:\"100%\",children:\"Ver detalles\"})}),/*#__PURE__*/_jsx(Button,{colorScheme:\"blue\",leftIcon:/*#__PURE__*/_jsx(FaShoppingCart,{}),onClick:()=>onAddToCart(product),flex:1,ml:2,children:\"Agregar\"})]})]})]});};","map":{"version":3,"names":["Box","Image","Badge","Text","Button","Flex","Stack","Icon","Tooltip","useColorModeValue","Link","FaStar","FaShoppingCart","FaHeart","BsBoxSeam","jsx","_jsx","jsxs","_jsxs","ProductCard","_ref","_product$price","product","onAddToCart","bgColor","textColor","createMarkup","html","__html","maxW","borderWidth","borderRadius","overflow","bg","_hover","shadow","transform","transition","children","position","src","image","alt","name","height","width","objectFit","discount","top","right","px","py","colorScheme","fontSize","fontWeight","p","display","alignItems","mb","category","stock","ml","justify","align","color","noOfLines","dangerouslySetInnerHTML","description","Array","map","_","i","as","Math","floor","rating","w","h","spacing","price","toFixed","textDecoration","label","to","id","style","flex","marginRight","variant","leftIcon","onClick"],"sources":["/home/ubuntu/cybershop-vuln-lab/CyberShop/frontend/src/components/ProductCard.js"],"sourcesContent":["import {\n  Box,\n  Image,\n  Badge,\n  Text,\n  Button,\n  Flex,\n  Stack,\n  Icon,\n  Tooltip,\n  useColorModeValue\n} from '@chakra-ui/react';\nimport { Link } from 'react-router-dom';\nimport { FaStar, FaShoppingCart, FaHeart } from 'react-icons/fa';\nimport { BsBoxSeam } from 'react-icons/bs';\n\nexport const ProductCard = ({ product, onAddToCart }) => {\n  const bgColor = useColorModeValue('white', 'gray.800');\n  const textColor = useColorModeValue('gray.700', 'white');\n\n  // Vulnerable: Renderiza HTML sin sanitizar\n  const createMarkup = (html) => ({ __html: html });\n\n  return (\n    <Box\n      maxW=\"sm\"\n      borderWidth=\"1px\"\n      borderRadius=\"lg\"\n      overflow=\"hidden\"\n      bg={bgColor}\n      _hover={{ shadow: 'lg', transform: 'translateY(-2px)', transition: 'all 0.2s' }}\n    >\n      <Box position=\"relative\">\n        <Image\n          src={product.image || 'https://via.placeholder.com/300'}\n          alt={product.name}\n          height=\"200px\"\n          width=\"100%\"\n          objectFit=\"cover\"\n        />\n        {product.discount > 0 && (\n          <Badge\n            position=\"absolute\"\n            top=\"4\"\n            right=\"4\"\n            px=\"2\"\n            py=\"1\"\n            colorScheme=\"red\"\n            borderRadius=\"md\"\n            fontSize=\"sm\"\n            fontWeight=\"bold\"\n          >\n            {product.discount}% OFF\n          </Badge>\n        )}\n      </Box>\n\n      <Box p=\"6\">\n        <Box display=\"flex\" alignItems=\"baseline\" mb={2}>\n          <Badge borderRadius=\"full\" px=\"2\" colorScheme=\"blue\">\n            {product.category}\n          </Badge>\n          {product.stock <= 5 && (\n            <Badge borderRadius=\"full\" px=\"2\" colorScheme=\"orange\" ml={2}>\n              ¡Últimas unidades!\n            </Badge>\n          )}\n        </Box>\n\n        <Flex justify=\"space-between\" align=\"baseline\" mb={2}>\n          <Text\n            fontWeight=\"semibold\"\n            fontSize=\"xl\"\n            color={textColor}\n            noOfLines={2}\n          >\n            {product.name}\n          </Text>\n        </Flex>\n\n        {/* Vulnerable: XSS a través de la descripción */}\n        <Box\n          fontSize=\"sm\"\n          color=\"gray.600\"\n          mb={2}\n          dangerouslySetInnerHTML={createMarkup(product.description)}\n        />\n\n        <Flex align=\"center\" mb={2}>\n          <Flex align=\"center\">\n            {[...Array(5)].map((_, i) => (\n              <Icon\n                key={i}\n                as={FaStar}\n                color={i < Math.floor(product.rating || 0) ? \"yellow.400\" : \"gray.300\"}\n                w={3}\n                h={3}\n              />\n            ))}\n          </Flex>\n          <Text ml={1} fontSize=\"sm\" color=\"gray.600\">\n            ({product.rating || 0})\n          </Text>\n        </Flex>\n\n        <Flex justify=\"space-between\" align=\"center\" mb={4}>\n          <Stack spacing={0}>\n            <Text fontSize=\"2xl\" fontWeight=\"bold\" color={textColor}>\n              ${product.price?.toFixed(2)}\n            </Text>\n            {product.discount > 0 && (\n              <Text\n                fontSize=\"sm\"\n                color=\"gray.500\"\n                textDecoration=\"line-through\"\n              >\n                ${((product.price || 0) * (1 + (product.discount || 0)/100)).toFixed(2)}\n              </Text>\n            )}\n          </Stack>\n          <Tooltip label={`${product.stock || 0} unidades disponibles`}>\n            <Flex align=\"center\">\n              <Icon as={BsBoxSeam} color=\"gray.500\" />\n              <Text ml={1} fontSize=\"sm\" color=\"gray.500\">\n                {product.stock || 0}\n              </Text>\n            </Flex>\n          </Tooltip>\n        </Flex>\n\n        <Flex justify=\"space-between\" align=\"center\">\n          <Link to={`/product/${product.id}`} style={{ flex: 1, marginRight: 2 }}>\n            <Button variant=\"outline\" colorScheme=\"blue\" width=\"100%\">\n              Ver detalles\n            </Button>\n          </Link>\n          <Button\n            colorScheme=\"blue\"\n            leftIcon={<FaShoppingCart />}\n            onClick={() => onAddToCart(product)}\n            flex={1}\n            ml={2}\n          >\n            Agregar\n          </Button>\n        </Flex>\n      </Box>\n    </Box>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}